<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Bash Hack of the Week - METAR</title>
    <link href="/stylesheets/default.css?9" rel="stylesheet" type="text/css">
    <link href="/stylesheets/highlight.css?9" rel="stylesheet" type="text/css">
    <!--link href="http://feeds2.feedburner.com/tatejohnson" rel="alternate" title="Tate Johnson" type="application/atom+xml"--!>
    <link href='/images/favicon.ico' rel='shortcut icon' type='image/ico'>
  </head>
  <body>
    <!--h1><a href="/">Apollo<span>.</span>Labs</a></h1--!>
    <h1><a href="/">Asclepius</a></h1>
    <nav>
      <ul>
        <li><a href="/">Blog</a></li>
        <li><a href="/projects/">Projects</a></li>
        <li><a href="/about/">About</a></li>
        <li><a href="/feed/">RSS Feed</a></li>
      </ul>
    </nav>
    <article>
  <time datetime="Fri Nov 18 00:00:00 -0600 2011">18 Nov, 2011</time>
  <h2>Bash Hack of the Week - METAR</h2>
  <p>I&rsquo;ve got a ~/bin full of cheap bash hacks I have come up with over the years and I thought this would be a good forum to start sharing them.  Some of the more complex ones I might start commiting to github.   </p>

<p>I cycle to and from work/school a lot and I like to know what the prairie winds are going to be doing.  If you know how to read metar/taf aviation weather reports it can be handy to have this information quickly available at the command line, or wrapped into a website, or in your bash prompt, etc.</p>

<p>Here&rsquo;s a simple script to get metar data for a given site:</p>

<pre><code>#!/bin/bash
# Usage &lt;this_file&gt; &lt;4 letter airport station id&gt;
STATION=echo $1 | tr &lsquo;[a-z]&rsquo; &lsquo;[A-Z]&rsquo;
TAF_REPO=&ldquo;http://weather.noaa.gov/pub/data/forecasts/taf/stations/&rdquo;
METAR_REPO=&ldquo;http://weather.noaa.gov/pub/data/observations/metar/stations/&rdquo;
REPO=$METAR_REPO
curl -s ${REPO}${STATION}.TXT | sed 1d
</code></pre>

<p>Copy this into a file called metar:</p>

<pre><code>cd ~/bin # or mkdir ~/bin &amp;&amp; cd ~/bin
cat &gt; metar #paste and finish with ctrl-D
</code></pre>

<p>Make it executable:</p>

<pre><code>chmod +x metar
</code></pre>

<p>Run it:</p>

<pre><code>./metar cyhz
</code></pre>

<p>That should spit out something like:</p>

<pre><code>CYHZ 181500Z 28014G25KT 15SM SCT028 02/M02 A2984 RMK SC3 SLP108   
</code></pre>

<p>You can make another file called taf, copy the code from metar into and change the REPO line.  This will give you a forecast.</p>

</article>
<!--p>If you've read this far, you should <a href="http://twitter.com/ve5pkx">follow me</a> on Twitter.</p--!>
<hr>
<div id="paginator">
  
    <a id="left" href="/2011/11/16/thermometer/" title="Simulation Thermometer Begins">&larr; Older</a>
  
  
</div>
<hr>
<footer>
  <p>
    <a href="/about/">Paul Kulyk</a>  
  </p>
</footer>


  </body>
</html>
