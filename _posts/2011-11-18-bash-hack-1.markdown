---
layout: default
title: Bash Hack of the Week - METAR
categories:
  - bash
  - metar
  - taf
  - weather
---

I've got a ~/bin full of cheap bash hacks I have come up with over the years and I thought this would be a good forum to start sharing them.  Some of the more complex ones I might start commiting to github.   

<br>

I cycle to and from work/school a lot and I like to know what the prairie winds are going to be doing.  If you know how to read metar/taf aviation weather reports it can be handy to have this information quickly available at the command line, or wrapped into a website, or in your bash prompt, etc.
<br>
Here's a simple script to get metar data for a given site:

    #!/bin/bash
    # Usage <this_file> <4 letter airport station id>
    STATION=`echo $1 | tr '[a-z]' '[A-Z]'`
    TAF_REPO="http://weather.noaa.gov/pub/data/forecasts/taf/stations/"
    METAR_REPO="http://weather.noaa.gov/pub/data/observations/metar/stations/"
    REPO=$METAR_REPO
    curl -s ${REPO}${STATION}.TXT | sed 1d

Copy this into a file called metar:

    cd ~/bin # or mkdir ~/bin && cd ~/bin
    cat > metar #paste and finish with ctrl-D


Make it executable:

    chmod +x metar

Run it:

    ./metar cyhz

That should spit out something like:

    CYHZ 181500Z 28014G25KT 15SM SCT028 02/M02 A2984 RMK SC3 SLP108   

You can make another file called taf, copy the code from metar into and change the REPO line.  This will give you a forecast.
